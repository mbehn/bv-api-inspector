function renderFields(){if($("#fields-link").html("Show available review submission fields for: "),$("#product-info, #fields, #category-info, #product-header, #review-stats-info, .rating .submissionid").empty(),$("#staging-flag").attr("checked"))var t="http://stg.api.bazaarvoice.com/data";else var t="http://api.bazaarvoice.com/data";var e=document.getElementById("apikey").value,a=document.getElementById("productid").value,s=document.getElementById("display-code").value;if(!a)var a="test1";$.getJSON(t+"/submitreview.json?passkey="+e+"&apiversion=5.4&productid="+a+"&displaycode="+s+"&userid=mbehntest1234&callback=?",function(t){1==t.HasErrors?(alert("Could not retrieve Submission Form data likely due to missing userid"),$("#fields-link, #fields-search").hide()):$("#fields-link, #fields-search").show();var e=1,a=[],s=[];$.each(t.Data.Fields,function(e,d){var i=document.createElement("div");if(i.id=t.Data.Fields[e].Id,i.className="field","IntegerInput"==t.Data.Fields[e].Type){$(i).addClass("rating");var r=t.Data.Fields[e].Label;null==r&&(r="No Label Available"),a.push("Id: "+t.Data.Fields[e].Id+" - Label: "+t.Data.Fields[e].Label)}if("SelectInput"==t.Data.Fields[e].Type&&($(i).addClass("context-data-question"),s.push("Id: "+t.Data.Fields[e].Id+" - Label: "+t.Data.Fields[e].Label)),$("#fields").append(i),$(i).append('<h4 class="submission-field-header">Submission Field: <i>'+t.Data.Fields[e].Label+'</i></h4><li class="field-info required"><label>Required: </label> '+t.Data.Fields[e].Required+'</li><li class="field-info bv-label"><label>Label: </label> '+t.Data.Fields[e].Label+'</li><li class="field-info submissionid"><label>Example API POST: </label> &'+t.Data.Fields[e].Id+'=</li><li class="field-info type"><label>Type : </label> '+t.Data.Fields[e].Type+"</li>"),("TextInput"==t.Data.Fields[e].Type||"TextAreaInput"==t.Data.Fields[e].Type)&&$(i).append('<li class="field-info MinLength">MinLength : '+t.Data.Fields[e].MinLength+'</li><li class="field-info MaxLength">MaxLength : '+t.Data.Fields[e].MaxLength+"</li>"),"SelectInput"==t.Data.Fields[e].Type){var o=document.createElement("select");o.id=t.Data.Fields[e].Id+"_options",o.className="options form-control",$(i).append(o),$(o).append("<h4>Options</h4>"),$.each(t.Data.Fields[e].Options,function(a,s){$(o).append('<option class="option form-control">Submission ID '+t.Data.Fields[e].Options[a].Value+" - Label: "+t.Data.Fields[e].Options[a].Label+"</option>")})}}),$(".context-data-question").each(function(t,e){$(this).parent().prepend(this),$("#ratings-search").autocomplete({source:a.sort()}),$("#cdv-search").autocomplete({source:s.sort()}),$("#ratings-search").on("click","blur","keydown",function(){var t=$("#ratings-search").val()})}),$(".rating").each(function(t,e){$(this).parent().prepend(this)})}),$.getJSON(t+"/products.json?passkey="+e+"&apiversion=5.4&filter=id:eq:"+a+"&callback=?&include=categories&filter_Reviews=issyndicated:eq:true&stats=reviews",function(a){var s=document.createElement("div");s.className="product";var d,i,r,o,l,c,n,u,p,v;a.Results[0].ImageUrl?a.Results[0].ImageUrl&&(d=a.Results[0].ImageUrl):d="images/no_image_avaliable.png",a.Results[0].ProductPageUrl?a.Results[0].ProductPageUrl&&(i=a.Results[0].ProductPageUrl):i="#No_Product_URL",a.Results[0].Name?a.Results[0].Name&&(o=a.Results[0].Name):o="No Product Name Provided",a.Results[0].Id?a.Results[0].Id&&(r=a.Results[0].Id):r="No Product ID Provided",a.Results[0].Description?a.Results[0].Description&&(c=a.Results[0].Description):c="No product description provided",a.Results[0].UPCs?a.Results[0].UPCs&&(l=a.Results[0].UPCs):l="No UPCs provided",void 0==a.Results[0].Brand?v="No Brand Information":(v=a.Results[0].Brand.Name,p=a.Results[0].Brand.Id),$("#fields-link").append('"'+o+'"');var m=a.Results[0].EANs,f=a.Results[0].CategoryId,g=[];$("#product-info").append('<tr><td class="productname">Product Name: </td><td><a href="'+i+'" target="_blank"><h1 id="product-name">'+o+'</td></tr></a><tr><td>&nbsp;</td><td><a href = "'+i+'" target="_blank"><img id="product-image" src="'+d+'" /></a></td></tr><br /><tr><td class="productid" >Product ID: </td><td><code>'+r+'</code></td></tr><tr><td class="productid" >Brand Name: </td><td><code>'+v+'</code></td></tr><tr><td class="productid" >Brand Id: </td><td><code>'+p+"</code></td></tr>"),l&&$.each(l,function(t,e){$("#product-info").append('<tr><td class="upc">UPC: </td><td><code>'+l[t]+"</code></td></tr>")}),m&&$.each(m,function(t,e){$("#product-info").append('<tr><td class="upc">EAN: </td><td><code>'+m[t]+"</code></td></tr>")}),$("#product-info").append("<tr><td>Description:</td><td>"+c+"</td></tr><br /><tr><td>Image URL:</td><td><code>"+d+"</code></td></tr><br /><tr><td>Product Page URL:</td><td><code>"+i+"</code></td></tr><br /><tr><td>&nbsp;</td><td>&nbsp;</td></tr>"),$.getJSON(t+"/categories.json?passkey="+e+"&apiversion=5.4&filter=id:eq:"+f,function(t){console.log(t),$("#category-info").append('<tr><td>Category Name: </td><td><a href="'+t.Results[0].CategoryPageUrl+'" target="_blank">'+t.Results[0].Name+"</a></td></tr><tr><td>CategoryId: </td><td><code>"+t.Results[0].Id+"</code></td></tr><tr><td>Category URL: </td><td><code>"+t.Results[0].CategoryPageUrl+"</code></td></tr>")})}),$.getJSON(t+"/statistics.json?passkey="+e+"&apiversion=5.4&stats=reviews,nativereviews&filter=productid:eq:"+a,function(t){var e=t.Results[0].ProductStatistics.NativeReviewStatistics.TotalReviewCount;isNaN(e)&&(e=0);var a=t.Results[0].ProductStatistics.NativeReviewStatistics.AverageOverallRating,s=t.Results[0].ProductStatistics.ReviewStatistics.TotalReviewCount,d=t.Results[0].ProductStatistics.ReviewStatistics.AverageOverallRating,i=s-e;a||(a="0"),d||(d="0"),$("#review-stats-info").append('<tr class="review-statistics"><td >Native Approved Reviews: </td><td>'+e+'</td></tr><tr class="review-statistics"><td >Syndicated Reviews:  </td><td>'+i+'</td></tr><tr class="review-statistics"><td >Total Reviews: </td><td>'+s+'</td></tr><tr class="review-statistics"><td >Avg Rating: </td><td><b>'+d+"</b></td></tr></table>")}),$("#product-content").show()}function getProductInformation(){if($("#product-content").show(),$("#staging-flag").attr("checked"))var t="http://stg.api.bazaarvoice.com/data";else var t="http://api.bazaarvoice.com/data";var e=document.getElementById("apikey").value;$("#product-info, #fields, #category-info, #product-header, #review-stats-info").empty(),$.getJSON(t+"/products.json?passkey="+e+"&apiversion=5.4&callback=?&include=categories&limit=100&filter=isactive:eq:true",function(t){$("#product-info").empty(),$("#fields").empty(),1==t.HasErrors&&alert(t.Errors[0].Message),$("#product-info").append("<tr><th>ProductId</th><th>ProductName</th></tr>");var e=t.Results,a=1;$.each(e,function(t,s){var d=e[t].ProductPageUrl;$("#product-info").append('<tr><td class="products-productid" value="'+e[t].Id+'"><code><b>'+e[t].Id+'</b></code></td><td class="products-product-name"><a href="'+d+'" target=_blank>'+e[t].Name+"</a></td></tr>"),a++})})}function appendData(){$("#name-wrapper").html(""),$("#name-wrapper").html(document.getElementById("product-name").value),$("#modal-product-image").attr("src",document.getElementById("product-image").src)}